apiVersion: v1
kind: ConfigMap
metadata:
  name: udp-director-config
  namespace: default
data:
  config.yaml: |
    # UDP Director Configuration - Service-Based Routing (Legacy)
    # This example uses Kubernetes Services for routing
    # Note: Direct pod/resource routing is recommended over service-based
    
    queryPort: 9000
    dataPort: 7777
    tokenTtlSeconds: 30
    sessionTimeoutSeconds: 300
    controlPacketMagicBytes: "FFFFFFFF5245534554"

    # Default endpoint - targets Agones GameServers via Services
    defaultEndpoint:
      resourceType: "gameserver"
      namespace: "default"
      labelSelector:
        agones.dev/fleet: "my-fleet"
      statusQuery:
        jsonPath: "status.state"
        expectedValues:
          - "Ready"

    # Resource query mapping using service-based approach
    resourceQueryMapping:
      gameserver:
        group: "agones.dev"
        version: "v1"
        resource: "gameservers"
        # Service-based routing (legacy approach)
        serviceSelectorLabel: "agones.dev/gameserver"
        serviceTargetPortName: "default"
